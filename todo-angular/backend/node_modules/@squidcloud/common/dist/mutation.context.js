"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MutationContext = void 0;
const tslib_1 = require("tslib");
const _ = tslib_1.__importStar(require("lodash"));
class MutationContext {
    constructor(mutation, beforeAndAfterDocs, serverTimeStamp) {
        this.mutation = mutation;
        this.beforeAndAfterDocs = beforeAndAfterDocs;
        this.serverTimeStamp = serverTimeStamp;
    }
    getMutationType() {
        return this.mutation.type;
    }
    affectsPath(path) {
        const before = this.beforeAndAfterDocs.before ? _.get(this.beforeAndAfterDocs.before, path) : undefined;
        const after = this.beforeAndAfterDocs.after ? _.get(this.beforeAndAfterDocs.after, path) : undefined;
        return !_.isEqual(before, after);
    }
}
exports.MutationContext = MutationContext;
//# sourceMappingURL=mutation.context.js.map